import{r as N,a as O,t as q}from"./BN22hL1_.js";import{w as x}from"./BtpYjWY7.js";function j(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function z(e,i){q(e,1,1,()=>{i.delete(e.key)})}function B(e,i,a,r,m,w,d,l,T,J,g,L){let c=e.length,h=w.length,o=c;const p={};for(;o--;)p[e[o].key]=o;const u=[],y=new Map,S=new Map,v=[];for(o=h;o--;){const t=L(m,w,o),n=a(t);let s=d.get(n);s?v.push(()=>s.p(t,i)):(s=J(n,t),s.c()),y.set(n,u[o]=s),n in p&&S.set(n,Math.abs(o-p[n]))}const b=new Set,A=new Set;function M(t){O(t,1),t.m(l,g),d.set(t.key,t),g=t.first,h--}for(;c&&h;){const t=u[h-1],n=e[c-1],s=t.key,f=n.key;t===n?(g=t.first,c--,h--):y.has(f)?!d.has(s)||b.has(s)?M(t):A.has(f)?c--:S.get(s)>S.get(f)?(A.add(s),M(t)):(b.add(f),c--):(T(n,d),c--)}for(;c--;){const t=e[c];y.has(t.key)||T(t,d)}for(;h;)M(u[h-1]);return N(v),u}const k="theme",Q=e=>{localStorage.setItem(k,JSON.stringify(e))},D=()=>{{const e=localStorage.getItem(k);return e!==null?JSON.parse(e):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}},I=x(D()),C=e=>I.update(i=>{var r;const a=!i;return Q(a),(r=document.querySelector(":root"))==null||r.setAttribute("data-theme",a?"dark":"light"),a}),F=()=>{document.documentElement.classList.remove("no-flash");const e=document.querySelector(":root"),i=e==null?void 0:e.getAttribute("data-theme"),a=localStorage.getItem(k),m=(a?JSON.parse(a):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)?"dark":"light";i!==m&&(e==null||e.setAttribute("data-theme",m)),a||window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",d=>{const l=d.matches;I.set(l),e==null||e.setAttribute("data-theme",l?"dark":"light")})};export{C as a,F as b,j as e,z as o,I as t,B as u};
